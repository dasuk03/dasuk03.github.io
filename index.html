<!DOCTYPE html>
<html lang="ru">
<head>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <title>ะะพัะผะพะทะฐั โ ะฃััั ะบะพะผะฟะปะตะบัะพะฒ</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ะะปะฐะฒะฝะฐั -->
  <div id="home" class="page active container">
    <header>
      <h1>๐ฏ ะะพัะผะพะทะฐั</h1>
      <div class="subtitle">ะฃััั ะบะพะผะฟะปะตะบัะพะฒ</div>
      <button class="btn btn-settings" onclick="toggleSettingsMenu()">โ๏ธ</button>
      <div id="settingsMenu" class="settings-menu hidden">
        <button class="btn btn-orange" onclick="showPage('players'); toggleSettingsMenu();">๐ฅ ะะณัะพะบะธ (DIP)</button>
        <button class="btn btn-accent" onclick="toggleTheme(); toggleSettingsMenu();">๐/โ๏ธ ะขะตะผะฐ</button>
      </div>
    </header>
    <div class="content">
      <div class="input-group">
        <select id="currentBranchSelect" onchange="changeBranch(this.value)">
          <option value="reutov">๐ข ะะตััะพะฒ</option>
          <option value="vdnh">๐ข ะะพะดะฝัะน ะกัะฐะดะธะพะฝ</option>
          <option value="rostokino">๐ข ะะพััะพะบะธะฝะพ</option>
        </select>
      </div>
      <button class="btn btn-accent" onclick="showPage('kits')">๐ ะัะพัะผะพัั ะบะพะผะฟะปะตะบัะพะฒ</button>
      <button class="btn btn-repair" onclick="showPage('repair')">๐ง ะะตะผะพะฝั</button>
      <button class="btn btn-green" onclick="showPage('addKit')">โ ะะพะฑะฐะฒะธัั ะบะพะผะฟะปะตะบั</button>
      <button class="btn btn-export-csv" onclick="exportToCSV()">๐ ะญะบัะฟะพัั ะฒ CSV</button>
    </div>
    <div class="footer">ะกะธััะตะผะฐ ััััะฐ โข v3.3</div>
  </div>

  <!-- ะัะพัะผะพัั ะบะพะผะฟะปะตะบัะพะฒ -->
  <div id="kits" class="page container">
    <header>
      <h1>๐ ะะพะผะฟะปะตะบัั</h1>
      <div class="subtitle">(ัััััะธะบ ะพะฑะฝะพะฒะธััั ะฝะธะถะต)</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">โ ะะฐะทะฐะด</button>

      <div class="sort-controls">
        <button class="sort-btn" id="sortAscBtn" onclick="setSortOrder('asc')">โฌ๏ธ ะฟะพ ะฒะพะทัะฐััะฐะฝะธั</button>
        <button class="sort-btn" id="sortDescBtn" onclick="setSortOrder('desc')">โฌ๏ธ ะฟะพ ัะฑัะฒะฐะฝะธั</button>
      </div>

      <div class="sort-controls">
        <button class="sort-btn" onclick="setSortColor('blueFirst')">๐ต ัะฝะฐัะฐะปะฐ</button>
        <button class="sort-btn" onclick="setSortColor('redFirst')">๐ด ัะฝะฐัะฐะปะฐ</button>
      </div>

      <div class="kits">
        <div class="kit">
          <div class="kit-header">๐ก๏ธ ะะพะผะฟะปะตะบัั</div>
          <ul id="allKitsList" class="kit-list"></ul>
        </div>
      </div>
    </div>
    <div class="footer">ะฃััั ะบะพะผะฟะปะตะบัะพะฒ</div>
  </div>

  <!-- ะะตะผะพะฝั -->
  <div id="repair" class="page container">
    <header>
      <h1>๐ง ะะตะผะพะฝั</h1>
      <div class="subtitle">ะะพะผะฟะปะตะบัั ะฒ ัะตะผะพะฝัะต (<span id="currentBranchRepair"></span>)</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">โ ะะฐะทะฐะด</button>

      <div class="repair-controls">
        <button class="repair-btn" id="repairAllBtn" onclick="setRepairFilter('all')">ะัะต</button>
        <button class="repair-btn" id="repairActiveBtn" onclick="setRepairFilter('active')">ะ ัะตะผะพะฝัะต</button>
      </div>

      <div class="kits">
        <div class="kit">
          <div class="kit-header">๐ก๏ธ ะะพะผะฟะปะตะบัั</div>
          <ul id="repairKitsList" class="kit-list"></ul>
        </div>
      </div>
    </div>
    <div class="footer">ะฃััั ัะตะผะพะฝัะฐ</div>
  </div>

  <!-- ะะพะฑะฐะฒะปะตะฝะธะต ะบะพะผะฟะปะตะบัะฐ -->
  <div id="addKit" class="page container">
    <header>
      <h1>โ ะะพะฑะฐะฒะธัั ะบะพะผะฟะปะตะบั</h1>
      <div class="subtitle"><span id="currentBranchAdd"></span></div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">โ ะะฐะทะฐะด</button>

      <div class="input-group">
        <select id="newVestColor">
          <option value="ะัะฐัะฝัะน">๐ด ะัะฐัะฝัะน</option>
          <option value="ะกะธะฝะธะน">๐ต ะกะธะฝะธะน</option>
        </select>
      </div>

      <div class="input-group">
        <input type="number" id="newBlasterID" min="1" max="99" placeholder="ะะปะฐััะตั ID">
      </div>

      <div class="input-group full-width">
        <span class="input-label">ะกะพัััะดะฝะธะบ</span>
        <input type="text" id="employeeName" placeholder="ะะผั ัะพัััะดะฝะธะบะฐ">
      </div>

      <div class="input-group full-width">
        <span class="input-label">ะะพะผะผะตะฝัะฐัะธะน</span>
        <textarea id="kitComment"></textarea>
      </div>

      <button class="btn btn-accent" onclick="createNewKit()">ะกะพะทะดะฐัั ะธ ะฟัะพะฒะตัะธัั</button>
      <div id="addError" class="error"></div>
    </div>
  </div>

  <!-- ะัะพะฒะตัะบะฐ ะบะพะผะฟะปะตะบัะฐ -->
  <div id="inspectKit" class="page container">
    <header>
      <h1>๐ง ะัะพะฒะตัะบะฐ ะบะพะผะฟะปะตะบัะฐ</h1>
      <div class="subtitle" id="inspectKitSubtitle">ID: -</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('kits')">โ ะะฐะทะฐะด</button>

      <div id="inspectKitDetails" class="kit-details"></div>
      <div id="inspectionChecklist" class="checklist"></div>
      <div id="kitStatus" class="status status-na">ะกัะฐััั: ะะต ะฟัะพะฒะตัะตะฝะพ</div>

      <div class="input-group full-width" style="margin-top:20px;">
        <span class="input-label">ะะพะผะผะตะฝัะฐัะธะน</span>
        <textarea id="inspectionComment"></textarea>
      </div>

      <button class="btn btn-green" onclick="saveInspection()">๐พ ะกะพััะฐะฝะธัั</button>
    </div>
  </div>

  <!-- ะัััั ัะตะผะพะฝัะฐ -->
  <div id="repairReport" class="page container">
    <header>
      <h1>๐ ะัััั ัะตะผะพะฝัะฐ</h1>
      <div class="subtitle" id="repairReportSubtitle">ID: -</div>
    </header>

    <div class="content">
      <button class="btn back-btn" onclick="showPage('repair')">โ ะะฐะทะฐะด</button>

      <div id="repairKitDetails" class="kit-details"></div>

      <div class="input-group full-width">
        <span class="input-label">ะะพะผะผะตะฝัะฐัะธะน</span>
        <textarea id="repairComment"></textarea>
      </div>

      <div class="input-group full-width">
        <span class="input-label">ะคะพัะพ</span>
        <input type="file" id="repairImageInput" accept="image/*" multiple>
      </div>

      <button class="btn btn-accent" onclick="saveRepairReport()">๐พ ะกะพััะฐะฝะธัั ะพัััั</button>
      <div id="repairSaveError" class="error"></div>
    </div>
  </div>

  <!-- ะะณัะพะบะธ -->
  <div id="players" class="page container">
    <header>
      <h1>๐ฅ ะะณัะพะบะธ</h1>
      <div class="subtitle">ะะฐัััะพะนะบะฐ DIP</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">โ ะะฐะทะฐะด</button>
      <ul id="allPlayersList" class="player-list"></ul>
    </div>
  </div>

<script src="script.js"></script>
</body>
</html>
