<!DOCTYPE html>
<html lang="ru">
<head>
  <script src="https://telegram.org/js/telegram-web-app.js "></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <title>–ö–æ—Å–º–æ–∑–∞—Ä ‚Äî –£—á—ë—Ç –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- –ì–ª–∞–≤–Ω–∞—è: –≤—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è -->
  <div id="home" class="page active container">
    <header>
      <h1>üéØ –ö–æ—Å–º–æ–∑–∞—Ä</h1>
      <div class="subtitle">–£—á—ë—Ç –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤</div>
      <button class="btn btn-settings" onclick="toggleSettingsMenu()">‚öôÔ∏è</button>
      <div id="settingsMenu" class="settings-menu hidden">
        <button class="btn btn-orange" onclick="showPage('players'); toggleSettingsMenu();">üë• –ò–≥—Ä–æ–∫–∏ (DIP)</button>
        <button class="btn btn-accent" onclick="toggleTheme(); toggleSettingsMenu();">üåô/‚òÄÔ∏è –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É</button>
      </div>
    </header>
    <div class="content">
      <div class="input-group">
        <select id="currentBranchSelect" onchange="changeBranch(this.value)">
          <option value="reutov">üè¢ –†–µ—É—Ç–æ–≤</option>
          <option value="vdnh">üè¢ –í–æ–¥–Ω—ã–π –°—Ç–∞–¥–∏–æ–Ω</option>
          <option value="rostokino">üè¢ –†–æ—Å—Ç–æ–∫–∏–Ω–æ</option>
        </select>
      </div>
      <button class="btn btn-accent" onclick="showPage('kits')">üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤</button>
      <button class="btn btn-repair" onclick="showPage('repair')">üîß –†–µ–º–æ–Ω—Ç</button>
      <button class="btn btn-green" onclick="showPage('addKit')">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç</button>
      <button class="btn btn-export-csv" onclick="exportToCSV()">üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
    </div>
    <div class="footer">–°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ ‚Ä¢ v3.2</div>
  </div>

  <!-- –í—ã–±–æ—Ä —Ñ–∏–ª–∏–∞–ª–∞ -->
  <div id="branchSelect" class="page container">
    <header>
      <h1>üè¢ –í—ã–±–æ—Ä —Ñ–∏–ª–∏–∞–ª–∞</h1>
      <div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª–∏–∞–ª</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
      <button class="btn btn-yellow" onclick="setBranch('reutov')">üè¢ –†–µ—É—Ç–æ–≤</button>
      <button class="btn btn-green" onclick="setBranch('vdnh')">üè¢ –í–æ–¥–Ω—ã–π –°—Ç–∞–¥–∏–æ–Ω</button>
      <button class="btn btn-orange" onclick="setBranch('rostokino')">üè¢ –†–æ—Å—Ç–æ–∫–∏–Ω–æ</button>
    </div>
    <div class="footer">–¢–µ–∫—É—â–∏–π —Ñ–∏–ª–∏–∞–ª: <span id="currentBranchFooter">–†–µ—É—Ç–æ–≤</span></div>
  </div>

  <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ -->
  <div id="kits" class="page container">
    <header>
      <h1>üìã –ö–æ–º–ø–ª–µ–∫—Ç—ã</h1>
      <div class="subtitle">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ (<span id="currentBranchKits"></span>)</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
      <div class="sort-controls">
        <button class="sort-btn" id="sortAscBtn" onclick="setSortOrder('asc')">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</button>
        <button class="sort-btn" id="sortDescBtn" onclick="setSortOrder('desc')">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É–±—ã–≤–∞–Ω–∏—é</button>
      </div>
      <div class="kits">
        <div class="kit">
          <div class="kit-header">üõ°Ô∏è –ö–æ–º–ø–ª–µ–∫—Ç—ã</div>
          <ul id="allKitsList" class="kit-list"></ul>
        </div>
      </div>
    </div>
    <div class="footer">–£—á—ë—Ç –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤</div>
  </div>

  <!-- –†–µ–º–æ–Ω—Ç -->
  <div id="repair" class="page container">
    <header>
      <h1>üîß –†–µ–º–æ–Ω—Ç</h1>
      <div class="subtitle">–ö–æ–º–ø–ª–µ–∫—Ç—ã –≤ —Ä–µ–º–æ–Ω—Ç–µ (<span id="currentBranchRepair"></span>)</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
      <div class="repair-controls">
        <button class="repair-btn" id="repairAllBtn" onclick="setRepairFilter('all')">–í—Å–µ</button>
        <button class="repair-btn" id="repairActiveBtn" onclick="setRepairFilter('active')">–í —Ä–µ–º–æ–Ω—Ç–µ</button>
      </div>
      <div class="kits">
        <div class="kit">
          <div class="kit-header">üõ°Ô∏è –ö–æ–º–ø–ª–µ–∫—Ç—ã</div>
          <ul id="repairKitsList" class="kit-list"></ul>
        </div>
      </div>
    </div>
    <div class="footer">–£—á—ë—Ç —Ä–µ–º–æ–Ω—Ç–∞</div>
  </div>

  <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞ -->
  <div id="addKit" class="page container">
    <header>
      <h1>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç</h1>
      <div class="subtitle">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (<span id="currentBranchAdd"></span>)</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>

      <div class="input-group">
        <select id="newVestColor">
          <option value="–ö—Ä–∞—Å–Ω—ã–π">üî¥ –ö—Ä–∞—Å–Ω—ã–π</option>
          <option value="–°–∏–Ω–∏–π">üîµ –°–∏–Ω–∏–π</option>
        </select>
      </div>

      <div class="input-group">
        <input type="number" id="newBlasterID" min="1" max="99" placeholder="–ë–ª–∞—Å—Ç–µ—Ä ID" inputmode="numeric">
      </div>

      <div class="input-group full-width">
        <span class="input-label">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</span>
        <input type="text" id="employeeName" placeholder="–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
      </div>

      <div class="input-group full-width">
        <span class="input-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
        <textarea id="kitComment" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
      </div>

      <button class="btn btn-accent" onclick="createNewKit()">–°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <div id="addError" class="error"></div>
    </div>
    <div class="footer">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Ç–∞</div>
  </div>

  <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä–æ–∫–æ–≤ (DIP) -->
  <div id="players" class="page container">
    <header>
      <h1>üë• –ò–≥—Ä–æ–∫–∏</h1>
      <div class="subtitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ DIP-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('home')">‚Üê –ù–∞–∑–∞–¥</button>
      <div class="players">
        <div class="player">
          <div class="player-header">üéöÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ DIP</div>
          <ul id="allPlayersList" class="player-list"></ul>
        </div>
      </div>
    </div>
    <div class="footer">–ò–≥—Ä–æ–∫–∏ 1-30</div>
  </div>

  <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞ -->
  <div id="inspectKit" class="page container">
    <header>
      <h1>üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞</h1>
      <div class="subtitle" id="inspectKitSubtitle">ID: -</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('kits')">‚Üê –ù–∞–∑–∞–¥</button>
      <div id="inspectKitDetails" class="kit-details"></div>
      <div class="checklist" id="inspectionChecklist">
        <!-- –ß–µ–∫–±–æ–∫—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      <div id="kitStatus" class="status status-na">–°—Ç–∞—Ç—É—Å: –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>

      <div class="input-group full-width" style="margin-top: 20px;">
        <span class="input-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
        <textarea id="inspectionComment" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≤–µ—Ä–∫–µ..."></textarea>
      </div>

      <button class="btn btn-green" id="saveInspectionBtn" onclick="saveInspection()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</button>
      <div id="saveError" class="error"></div>
    </div>
    <div class="footer">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è</div>
  </div>

  <!-- –û—Ç—á—ë—Ç –ø–æ —Ä–µ–º–æ–Ω—Ç—É -->
  <div id="repairReport" class="page container">
    <header>
      <h1>üìù –û—Ç—á—ë—Ç –ø–æ —Ä–µ–º–æ–Ω—Ç—É</h1>
      <div class="subtitle" id="repairReportSubtitle">ID: -</div>
    </header>
    <div class="content">
      <button class="btn back-btn" onclick="showPage('repair')">‚Üê –ù–∞–∑–∞–¥</button>
      <div id="repairKitDetails" class="kit-details"></div>

      <div class="input-group full-width">
        <span class="input-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ä–µ–º–æ–Ω—Ç—É</span>
        <textarea id="repairComment" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É..."></textarea>
      </div>

      <div class="input-group full-width">
        <span class="input-label">–§–æ—Ç–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
        <input type="file" id="repairImageInput" accept="image/*">
      </div>

      <button class="btn btn-accent" onclick="saveRepairReport()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á—ë—Ç</button>
      <div id="repairSaveError" class="error"></div>
    </div>
    <div class="footer">–†–µ–º–æ–Ω—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞</div>
  </div>

  <script src="script.js"></script>

  <!-- === –ù–ê–ß–ê–õ–û: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ === -->
  <div id="onboardingModal" class="onboarding-modal">
    <div class="onboarding-content">
      <div id="onboardingStep1" class="onboarding-step active">
        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ö–æ—Å–º–æ–∑–∞—Ä!</h2>
        <p>–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–∞–∑–µ—Ä—Ç–∞–≥-–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º.</p>
        <p>–î–∞–≤–∞–π—Ç–µ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–π–¥—ë–º—Å—è –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º.</p>
        <button id="nextToStep2" class="btn btn-accent">–î–∞–ª–µ–µ</button>
      </div>
      <div id="onboardingStep2" class="onboarding-step">
        <h2>–í—ã–±–æ—Ä —Ñ–∏–ª–∏–∞–ª–∞</h2>
        <p>–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª, —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å.</p>
        <img src="https://via.placeholder.com/200x100?text=–§–∏–ª–∏–∞–ª" alt="–í—ã–±–æ—Ä —Ñ–∏–ª–∏–∞–ª–∞">
        <button id="prevFromStep2" class="btn btn-secondary-bg">–ù–∞–∑–∞–¥</button>
        <button id="nextToStep3" class="btn btn-accent">–î–∞–ª–µ–µ</button>
      </div>
      <div id="onboardingStep3" class="onboarding-step">
        <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤</h2>
        <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç—ã.</p>
        <img src="https://via.placeholder.com/200x100?text=–ü—Ä–æ–≤–µ—Ä–∫–∞" alt="–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞">
        <button id="prevFromStep3" class="btn btn-secondary-bg">–ù–∞–∑–∞–¥</button>
        <button id="nextToStep4" class="btn btn-accent">–î–∞–ª–µ–µ</button>
      </div>
      <div id="onboardingStep4" class="onboarding-step">
        <h2>–†–µ–º–æ–Ω—Ç</h2>
        <p>–û—Ç–º–µ—Ç—å—Ç–µ –∫–æ–º–ø–ª–µ–∫—Ç –∫–∞–∫ "–≤ —Ä–µ–º–æ–Ω—Ç–µ" –∏ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç—á—ë—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ.</p>
        <img src="https://via.placeholder.com/200x100?text=–†–µ–º–æ–Ω—Ç" alt="–†–µ–º–æ–Ω—Ç">
        <button id="prevFromStep4" class="btn btn-secondary-bg">–ù–∞–∑–∞–¥</button>
        <button id="finishOnboarding" class="btn btn-green">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
      </div>
    </div>
  </div>
  <!-- === –ö–û–ù–ï–¶: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ === -->

</body>
</html>
